---
title: "Trabalho Final - R para Iniciantes"
author: "Maurílio Bonora Júnior"
date: "26/04/2019"
output:
  word_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introdução

Sempre que vamos escrever um projeto ou relatório, somos bombardeados por um gigantesca base de dados com artigos de relevância variável sobre o determinado assunto. Organizar e escolher os melhores artigos dentre essa imensidão de referências é uma dura tarefa, que muitas vezes pode demandar um tempo que muitos pesquisadores não têm. Contudo, com o advento do R e seus diversos pacotes, entre eles o "Bibliometrix", essa tarefa de comparar artigos para escolher os melhores se tornou muito mais fácil. Para exemplificar isso, foram escolhidos dois termos para se começar a busca de arquivos em base de dados (Scopus). Tais termos foram: "TCR" e "Signalling". Abaixo segue todo o procedimento com os códigos e gráficos possíveis de se fazer com o pacote "Bibliometrix".


## Requerimentos

Para a realização do trabalho, foram necessários alguns programas e pacotes, dentre eles:
 
  - O próprio R: garante toda a linguagem R para se trabalhar;

  - RStudio: um software com uma interface mais elegante e amigável ao usuário para ele conseguir trabalho;
 
  - Git: um sistema de controle de versão distribuído. Utilizado juntamente do Rmarkdown para se fazer o upload direto do trabalho para um repositório em nuvem (Github);
 
  - MikTex: programa necessário para a conversão do Script do Rmarkdown para PDf;
  
  - Pacote "Rmarkdown": converte scripts do R (mais especificamente do Rmarkdown) em uma variedade de formatos incluindo HTML, MS Word, PDF e Beamer. Além disso, o Rmarkdown consegue compilar os scripts em especíes de "livros" onde é possível colocar comentários, códigos fontes e a saída (resultado) do código do script;
 
  - Pacote "Bibliometrix": garante um conjunto de ferramentas muito útil para análises na área de cientometria e bibliometria;

  - Um arquivo Scopus.bib: arquivo baixado da base de dados Scopus com todas as informações de artigos escolhidos a partir das palavras-chaves selecionado.


## Desenvolvimento

#### Carregamento e Conversão dos Dados

Após a instalação do R, RStudio, Miktex e Git (lembrando que é necessário a criação de um diretório com o nome do trabalho no Git), é necessário fazer o download dos pacotes "Rmarkdown" e "Bibliometrix".

Em seguida é necessário carregar o pacote "Bibliometrix":

```{r}
library(bibliometrix)
```

Já com o arquivo scopus.bib dentro da sua pasta de trabalho está na hora de começar a preparar os dados para as análises. A primeira função que será utilizada é "read.Files", que converte todos os arquivos de texto de scopus.bib em um grande vetor de caracteres que chamaremos de D.

```{r}
D<-readFiles("scopus.bib")
```

Esse grande objeto D pode então ser convertido em um DataFrame a partir da função "convert2df".

```{r}
M <- convert2df(D, dbsource = "scopus", format = "bibtex")
```


#### Análise Bibliométrica

O primeiro passo para fazer uma análise descritiva desse Data Frame é utilizara função "biblioAnalysis", que irá calcular as principais medidas bibliométricas de toda nossa base de dados. 

```{r}
results<-biblioAnalysis(M, sep = ";")
```

Tal função retorna um objeto da classe bibliometrix (introduzida com o pacote homônimo), que contem os seguintes componentes como o número total de artigos, primeiro autor de cada manuscrito, número de vezes que cada manustrico foi citado, entre outros. Para mais informações use a função:

```{r}
help("biblioAnalysis")
```

Contudo, o objeto "results" que obtemos ainda é muito grande e complicado de se ler, sendo muito laborioso obter informações gerais a partir dali. Para isso, usa-se a função "summary" para se obter os principais resultados da nossa análise bibliométrica. Essa função aceita ainda dois argumentos adicionais: "k" é um valor de formatação que indica quantas linhas de cada tabela serão mostradas, enquanto "pause" é um valor lógico usado para permitir ou não a pausa na rolagem da tela.

```{r}
summary(results, k =10, pause = FALSE)
```

A partir daí obtemos uma série de resultados interessantes, desde as principais informações dos nossos dados - como nº de documentos, média de citações por artigos, nº de autores, nº de artigos com autores únicos - até informações mais curiosas como a produção de artios por ano desde o primeiro que foi publicado, autores mais produtivos, países com maiores nº de citações, principais fontes de artigos, entre diversas outras. Por fim, a partir dessas mesmos informações básicas obtidas, é possível montar gráficos que nos dão uma ideia bem mais visual da relação entre nossos dados, usando a função "plot".

```{r}
plot(x=results, k=10, pause=FALSE)
```


#### Análise de Referências Citadas

É possível produzir uma tabela mostrando as referências mais citadas dos autores mais citados, utilizando-se a função "citations". Para se obter os artigos mais citadas, usa-se:

```{r}
CR <- citations(M, field = "article", sep = ";")
cbind(CR$Cited[1:10])
```

Enquanto que para se obter os autores mais citados, usa-se:

```{r}
CR<- citations(M, field = "author", sep = ";")
cbind(CR$Cited[1:10])
```

Por fim, é possível montar ainda uma tabela onde mostra-se os autores mais citados "localmente", isto é, dentre a base de dados que temos, quais foram os autores mais citados entre os outros autores dessa base. Para isso, utilizamos a função "LocalCitations". Utilizaremos as mesmas funções auxiliares usadas anteriormente para ver os 10 principais autores e principais artigos citados local e respectivamente:

```{r}
CR <- localCitations(M, sep = ";")
CR$Authors[1:10,]
CR$Papers[1:10,]
```


#### Ranking de Dominância de Autores

O fator de dominância é uma taxa que indica a fração de artigos com múltiplos autores em que um pesquisador aparece como primeiro autor. A função "dominance" calcula o ranking da dominância entre os autores.

```{r}
DF <- dominance(results, k = 10)
DF
```


#### O índice-h dos autores

O índice-h é uma métrica que mede ambas produtividade e impacto de citação das publicações de cientistas. Esse índice é baseado no conjunto de artigos mais citados do autor em específico e no número de citações que esses artigos receberam em outras publicações. A função "Hindex" calcula o índice-h de autores ou de fontes e suas variantes (índice-g e índice-m) em uma conjunto de dados bibliográficos. Para calcular o índice-h dos 10 autores mais produtivos dessa coleção em específico, utilizaremos os seguintes códigos:

```{r}
authors=gsub(","," ",names(results$Authors)[1:10])
indices <- Hindex(M, field = "author", elements=authors, sep = ";", years = 50)
indices$H
```


#### Produtividade dos principais autores no decorrer do tempo

A função "AuthorProdOverTime" facilmente consegue nos dar um gráfico mostrando a produção dos 10 primeiros autores (em termos de número de publicações e número de citações totais por ano) no decorrer do tempo.

```{r}
topAU <- authorProdOverTime(M, k = 10, graph = TRUE)
```


#### Estimativa do coeficiente da regra de Lotka

A regra de Lotka descreve a frequência de publicação dos autores de um determinado campo como uma lei do quadrado inversa, onde o número de autores publicando um determinado número de artigos é uma taxa fixa para o número de autores publicando um artigo único. Essa suposição implica que o coeficiente beta teórico da regra de Lotka é igual a 2. A função "lotka" estima os coeficientes dessa regra de Lotka. Usando tal função é possível estimar por exemplo o coeficiente beta, dito anteriormente, de nossa coleção bibliográfica e acessar - a partir de um teste estatístico - a similaridade da distribuição empírica com uma teórica.

  - Distribuição empírica da produtividade dos autores:

```{r}
L <- lotka(results)
L$AuthorProd
```


  - Coeficiente beta estimado:
```{r}
L$Beta
```


  - Constante:
```{r}
L$C
```


  - Qualidade de ajuste:
```{r}
L$R2
```


  - Valor p dos dois testes K-S da amostra
```{r}
L$p.value
```


A tabela L$AuthorProd mostra a distribuição da produção científica observada em nosso exemplo. Nosso coeficiente beta é de aproximadamente 3.3 com uma qualiidade de ajuste de 0.98. Os dois testes (estatísticos) Kolmogorov-Smirnoff nos provê um valor p de 0.02, o que significa que basicamente não há diferença estatística entre nossos distribuições Lotka esperada e observada. Para uma visão gráfica disso, é possível usar a função plot:

```{r}
Observed=L$AuthorProd[,3]
Theoretical=10^(log10(L$C)-2*log10(L$AuthorProd[,1]))
plot(L$AuthorProd[,1],Theoretical,type="l",col="red",ylim=c(0, 1), xlab="Articles",ylab="Freq. of Authors",main="Scientific Productivity")
lines(L$AuthorProd[,1],Observed,col="blue")
legend(x="topright",c("Theoretical (B=2)","Observed"),col=c("red","blue"),lty = c(1,1,1),cex=0.6,bty="n")
```


## Matrizes de Redes Bibliográficas







```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.